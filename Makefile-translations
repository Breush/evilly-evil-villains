# Makefile for internationalization

#===== Edit below

LANGUAGES_SUPPORTED=fr

TRANSLATABLE_FILES_RELATIVE=		\
	states/quit.cpp					\
	states/game/pause.cpp			\
	states/game/dungeondesign.cpp	\
	states/menu/main.cpp			\
	states/menu/selectworld.cpp		\
	dungeon/panel.cpp				\
	dungeon/sidebar.cpp				\
	
OUTPUT_POT=res/po/eev.pot
	
#===== Do not touch below

TRANSLATABLE_FILES=$(TRANSLATABLE_FILES_RELATIVE:%=src/%)
TRANSLATIONS_FILES=$(LANGUAGES_SUPPORTED:%=res/po/%/LC_MESSAGES/eev.mo)

.PHONY: all clean translations

all: $(OUTPUT_POT) translations

$(OUTPUT_POT): $(TRANSLATABLE_FILES)
	xgettext -k_ --c++ --msgid-bugs-address=sherlock.breust@gmail.com --foreign-user -i --no-location -o $(OUTPUT_POT) $(TRANSLATABLE_FILES)

translations: $(TRANSLATIONS_FILES)

%.mo: %.po
	msgfmt -o $*.mo $*.po

clean:
	rm -f $(OUTPUT_POT) $(TRANSLATIONS_FILES)

